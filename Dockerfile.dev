FROM node:24-slim

WORKDIR /app

RUN printf "ignore-scripts=true\n" > .npmrc

COPY package*.json ./

RUN npm install --save-dev @lavamoat/allow-scripts
RUN npx allow-scripts run npm ci

COPY . .

EXPOSE 3000

CMD ["npm", "run", "dev"]
